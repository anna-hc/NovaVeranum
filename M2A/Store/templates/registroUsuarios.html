{% extends "plantilla_base.html"  %}
{% block titulo %} Login M2A  {% endblock %}
{% block contenido %}

    <div class="container mt-5 pt-5">
      <div class="col d-flex flex-column min-vh-100">
        <div class="row justify-content-center">
          {%if messages%}
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
            {% for message in messages %}
            {{ message }}
            {% endfor %}
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
        {%endif%}
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header" style="text-align: center; font-size: 20px; background-color: #202043; color: whitesmoke; font-weight: bold;">
                        Registro M2A
                    </div>
                    <div class="card-body" style="background-color: #2f2c58;">
                        <form action="{% url 'registrarse' %}" method="post" enctype="multipart/form-data"> 
                          {% csrf_token %}
                          <input type="hidden" name="txtId" value="0{{usuario.idUsuario}}">
                            <div class="mb-3">
                                <label for="rut" class="form-label" style="color: whitesmoke;">RUT</label>
                                <input type="name" value="{{usuario.rut}}" name="txtRut" class="txtRut form-control" id="rut" aria-describedby="emailHelp" style="background-color: #14142b; border-color: #202043; color: white; " placeholder="Sin puntos y con guión.">
                            </div>
                            <div class="mb-3">
                                <label for="nombre" class="form-label" style="color: whitesmoke;">Nombre</label>
                                <input type="name" value="{{usuario.nombre}}" name="txtNombre" class="txtNombre form-control" id="nombre" style="background-color: #14142b; border-color: #202043; color: white;" placeholder="Ingresa tu nombre">
                            </div>
                            <div class="mb-3">
                                <label for="apellido" class="form-label" style="color: whitesmoke;">Apellido</label>
                                <input type="lastname" value="{{usuario.apellido}}" name="txtApellido" class="txtApellido form-control" id="apellido" style="background-color: #14142b; border-color: #202043; color: white" placeholder="Ingresa tu apellido">
                            </div>
                            <div class="mb-3">
                                <label for="correo" class="form-label" style="color: whitesmoke;">Email</label>
                                <input type="email" value="{{usuario.email}}" name="txtEmail" class="txtEmail form-control" id="correo" style="background-color: #14142b; border-color: #202043; color: white" placeholder="Ingresa tu email">
                            </div>
                            <div class="mb-3">
                              <label for="telefono" class="form-label" style="color: whitesmoke;">Teléfono</label>
                              <input type="tel" value="{{usuario.telefono}}" name="txtTelefono" class="txtTelefono form-control" id="telefono" style="background-color: #14142b; border-color: #202043; color: white" placeholder="Debe comenzar con +569/+562.">
                          </div>
                          <div class="row">
                            <div class="col-5 pt-2 mt-auto">
                              <h6 style="color: whitesmoke;">Elige tu región:</h6>
                              <select class="selectRegion form-select form-select-sm" value="{{usuario.region}}" aria-label="Default select example" name="txtRegion" style="background-color: #14142b; border-color: #202043; color: white">
                                <option selected>Seleccionar Región</option>
                                {%for region in regiones%}
                                {%if usuario.region.idRegion == region.idRegion %}
                                <option name="idTpoClave" value="{{region.idRegion}}" selected>{{region.nombre}}</option>
                                {%else%}
                                <option name="idTpoClave" value="{{region.idRegion}}">{{region.nombre}}</option>
                                {%endif%}
                                {%endfor%}
                              </select>
                            </div>
                            <div class="col-5 offset-2 pt-2 mt-auto">
                              <h6 style="color: whitesmoke;">Elige tu nivel educacional:</h6>
                              <select class="selectEd form-select form-select-sm" value="{{usuario.nivelEd}}" name="txtNvlEducacional"aria-label="Default select example" style="background-color: #14142b; border-color: #202043; color: white">
                                <option selected>Seleccionar Nivel</option>
                                {%for nivel in nivelesEducacionales%}
                                {%if usuario.nivelEd.idEducacion == nivel.idEducacion %}
                                <option name="idTpoClave" value="{{nivel.idEducacion}}" selected>{{nivel.nombre}}</option>
                                {%else%}
                                <option name="idTpoClave" value="{{nivel.idEducacion}}">{{nivel.nombre}}</option>
                                {%endif%}
                                {%endfor%}
                              </select>
                            </div>
                            <div class="row">
                              <div class="col-md-6 mb-3 pt-3">
                                <label for="edad" class="form-label" style="font-weight: bold;">Fecha de nacimiento:</label>
                                <input type="date" value="{{usuario.fechaNac|date:'Y-m-d'}}" class="selectNac form-control" id="edad" name="edad" style="width: 85%; height: 45%;background-color: #14142b; border-color: #202043; color: white" required max="2006-01-01">
                              </div>
                            </div>
                            <div class="col pt-4 justify-content-start d-flex">
                              <button type="submit" class="btn-aceptar btn float-end me-auto" style="font-weight: bold;" id="limpiarRegistro">Limpiar</button>
                            </div>
                            <div class="col pt-4">
                              <button type="submit" name="enviarRegistro"class="btn-aceptar btn float-end ms-auto" style="font-weight: bold;" id="enviarRegistro">Registrarse</button>
                            </div>
                            
                            <div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
  </div>
{%endblock%}